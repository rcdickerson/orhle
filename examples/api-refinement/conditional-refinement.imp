// A refinement involving a simple conditional.

expected: valid;

forall: refinement;
exists: original;

pre:  true;
post: (= original!ret refinement!ret);

aspecs:
  flipCoin() {
    pre: true;
    post: (or (= n 0) (= n 1));
  }

especs:
  flipCoin() {
    templateVars: n;
    pre: (or (= n 0) (= n 1));
    post: (= r n);
  }

prog original():
  r := call flipCoin();
  if (r == 0) then
    ret := 10;
  else
    ret := 20;
  end
endp

prog refinement():
  r := call flipCoin();
  if (r == 0) then
    ret := 20;
  else
    ret := 10;
  end
endp
